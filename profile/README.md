# ğŸ¤ MAJU

<div align="center">
  <h1>MAJU - ë§ì¶¤í˜• ë©˜í† ë§ ë§¤ì¹­ ì„œë¹„ìŠ¤</h1>
</div>

<br/>

<div align="center">
  <img src="./assets/introduce.png" alt="Main" style="border-radius: 10px;"/>
</div>

<br/>

<div align="center">
  <a href="http://13.125.96.234/login">í™ˆí˜ì´ì§€</a>
</div>

<br/>

## ğŸª¢ í”„ë¡œì íŠ¸ ì†Œê°œ

"ë§ˆìŒì„ ë‚˜ëˆ„ëŠ” ë©˜í† ë§ìœ¼ë¡œ

ì£¼ì–´ì§„ í™˜ê²½ì„ ë„˜ì–´ ì„±ì¥í•©ë‹ˆë‹¤"
<br><br>

ë§ˆì£¼(MAJU)ëŠ” ì €ì†Œë“Â·í•œë¶€ëª¨ ê°€ì • í•™ìƒë„ ì§ˆ ë†’ì€ êµìœ¡ê³¼ ì§„ë¡œ ë©˜í† ë§ì„ ë°›ì„ ìˆ˜ ìˆëŠ”

ì§€ì†ê°€ëŠ¥í•œ êµìœ¡ ë§¤ì¹­ í”Œë«í¼ì…ë‹ˆë‹¤.

<br><br>

## ğŸ‘­ íŒ€ì› ì†Œê°œ



| <img src =https://github.com/user-attachments/assets/8b0f6e2a-3e5a-4b9c-8ea0-8dc20353a2c9 width="200" height="165"> | <img src =https://github.com/user-attachments/assets/8b0f6e2a-3e5a-4b9c-8ea0-8dc20353a2c9 width="200" height="165"> | <img src =https://github.com/user-attachments/assets/fb9b8938-6156-4715-b7f1-f5bd09b11296 width="200" height="165"> | <img src =https://github.com/user-attachments/assets/eb97a7f7-5130-4949-bd8e-79bac02deaa1 width="200" height="165"> | <img src =https://github.com/user-attachments/assets/8b0f6e2a-3e5a-4b9c-8ea0-8dc20353a2c9 width="200" height="165"> |  
|:-----------------------------------------------------------------------------------------------------------------------------------------:|:-----------------------------------------------------------------------------------------------------------------------------------------:|:------------------------------------------------------------------------------------------------------------------------------------------:|:-----------------------------------------------------------------------------------------------------------------------------------------:|:------------------------------------------------------------------------------------------------------------------------------------------:|
|                                                                 Back-End                                                                 |                                                                 PM/Design                                                                 |                                                                  AI/Back-End                                                                  |                                                                 Front-End                                                                  |                                                                  Back-End                                                                  |Back-End|
|                                                     [ì±„ì›](https://github.com/offzeroma1)                                                     |                                                   [ê²½ì„œ](https://www.instagram.com/starofdesigner?igsh=MXQ3dHB6ZGR6aDQ5NA%3D%3D&utm_source=qr)                                                    |                                                    [íƒœë¯¼](https://github.com/therapeuti)                                                     |                                                    [ì—¬ìš¸](https://github.com/yeowul)                                                     |                                                     [ì†¡ê²½](https://github.com/miiiiiin)                                                      |

<br><br>


## ğŸ–¥ ë°°í¬ ë§í¬ ë° ì‹œì—° ì˜ìƒ

[http://13.125.96.234/login](url)

<br>

### ë©˜í‹° ì‹œì—° ì˜ìƒ

[https://www.youtube.com/watch?v=H8pBHxiEEtA](url)



### ë©˜í†  ì‹œì—° ì˜ìƒ

[https://www.youtube.com/watch?v=M6ag4s58rpc](url)
<br><br>

</br>

## ğŸª„ê¸°ìˆ  ìŠ¤íƒ

### Front-End
<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=white"> <img src="https://img.shields.io/badge/typescript-3178C6?style=for-the-badge&logo=typescript&logoColor=white"> <img src = "https://img.shields.io/badge/Tailwind_CSS-grey?style=for-the-badge&logo=tailwind-css&logoColor=38B2AC">


### Back-End
<img src="https://img.shields.io/badge/java-007396?style=for-the-badge&logo=java&logoColor=white"> <img src="https://img.shields.io/badge/Spring%20Boot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white"> <img src="https://img.shields.io/badge/gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white">

<img src="https://img.shields.io/badge/Spring%20Security-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white"> <img src="https://img.shields.io/badge/JWT-black?style=plastic&logo=JSON%20web%20tokens"> <img src="https://img.shields.io/badge/OAUTH2-EC1C24?style=for-the-badge&logo=Authy&logoColor=white"> <img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white">

<img src = "https://img.shields.io/badge/Flask-000000?style=for-the-badge&logo=Flask&logoColor=white"> <img src = "https://img.shields.io/badge/-OpenAI%20API-eee?style=flat-square&logo=openai&logoColor=412991">
<br>

### Production & Deploy
<img src="https://img.shields.io/badge/aws-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white"> <img src="https://img.shields.io/badge/ec2-FF9900?style=for-the-badge&logo=amazonec2&logoColor=white"> <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
<br>
 <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white"> <img src="https://img.shields.io/badge/docker-257bd6?style=for-the-badge&logo=docker&logoColor=white">

### Collaboration tool
<img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white"> <img src="https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=figma&logoColor=white">
  
<br/>

## ğŸ”§ Troubleshooting

### ğŸ§‘ğŸ»â€ğŸ’» ë°±ì—”ë“œ

<details>
<summary>ğŸ›  ë©˜í†  ë§¤ì¹­ ëª©ë¡ ìƒíƒœ ìš°ì„ ìˆœìœ„ ì •ë ¬ ë¡œì§ ê°œì„ </summary>

**Problem & Reason**

- ê¸°ì¡´ ë©˜í†  ë§¤ì¹­ ì‹œìŠ¤í…œì—ì„œëŠ” AI ë§¤ì¹­ ì ìˆ˜ë§Œì„ ê¸°ì¤€ìœ¼ë¡œ ë©˜í†  ëª©ë¡ì„ ì •ë ¬í•˜ì—¬ ì œê³µ
- ì´ë¡œ ì¸í•´ ì´ë¯¸ ë©˜í† ë§ ì‹ ì²­ì´ ì§„í–‰ ì¤‘ì¸(PENDING) ë˜ëŠ” í™•ì •ëœ(CONFIRMED) ë©˜í† ê°€ paging ìµœì´ˆ ì¡°íšŒ(null)ì— ì—†ì„ ë•Œ, ë§¤ì¹­ í™œì„±í™” ë°œìƒ
- ë©˜í‹°ëŠ” 1ëª…ì˜ ë©˜í† ë§Œ ì‹ ì²­í•  ìˆ˜ ìˆìŒìœ¼ë¡œ í•­ìƒ ìƒíƒœê°€ ìˆëŠ” ë©˜í† ê°€ ìš°ì„ ìœ¼ë¡œ ë°°ì¹˜ë˜ëŠ” ê°œì„  í•„ìš”


**ê¸°ì¡´ ë¡œì§ (Before)**
```java
// AI ì ìˆ˜ë§Œìœ¼ë¡œ ì •ë ¬ëœ ë‹¨ìˆœ ì¡°íšŒ
List<MentorCandidateDto> candidates = matchingScores.stream()
    .map(AiMatchingScoreAnalysis::getMentor)
    .map(user -> (Mentor) user)
    .map(mentor -> MentorCandidateDto.from(mentor, 
        getMentoringByMenteeAndMentor(currUser.getId(), mentor.getId()), 
        calculateRelativeFitByMentee(currUser.getId(), mentor.getId())))
    .collect(Collectors.toList());
```

**To Solve**

- ë©˜í† ë§ ìƒíƒœ ê¸°ë°˜ ìš°ì„ ìˆœìœ„ ë¡œì§ì„ ì¶”ê°€
- PENDING/CONFIRMED ìƒíƒœì˜ ë©˜í† ë§ì´ ì¡´ì¬í•  ê²½ìš° í•´ë‹¹ ë©˜í† ë¥¼ ìµœìƒë‹¨ì— ë°°ì¹˜í•˜ë„ë¡ ê°œì„ 
- ê¸°ì¡´ ì»¤ì„œ ê¸°ë°˜ í˜ì´ì§€ë„¤ì´ì…˜ê³¼ì˜ í˜¸í™˜ì„±ë„ ê³ ë ¤

**ê°œì„ ëœ ë¡œì§ (After)**
```java
// 1. ìš°ì„ ìˆœìœ„ ë©˜í† ë§ ì¡°íšŒ (PENDING/CONFIRMED ìƒíƒœ)
Optional<Mentoring> priorityMentoring = mentoringRepository
    .findByMenteeIdAndStatusIn(currUser.getId(), 
        Arrays.asList(MentoringStatus.PENDING.getStatus(),
                     MentoringStatus.CONFIRMED.getStatus()));

// 2. ìƒíƒœ ê¸°ë°˜ ì •ë ¬ ë¡œì§ ì¶”ê°€
List<MentorCandidateDto> candidates = matchingScores.stream()
    .map(/* ê¸°ë³¸ ë§¤í•‘ ë¡œì§ */)
    .sorted((c1, c2) -> {
        // ë©˜í† ë§ ì‹ ì²­ ìƒíƒœì¸ ë©˜í† ë¥¼ ìµœìƒìœ„ë¡œ ì •ë ¬
        boolean c1HasMentoring = MentoringStatus.PENDING.getStatus().equals(c1.status()) ||
                                MentoringStatus.CONFIRMED.getStatus().equals(c1.status());
        boolean c2HasMentoring = MentoringStatus.PENDING.getStatus().equals(c2.status()) ||
                                MentoringStatus.CONFIRMED.getStatus().equals(c2.status());
        
        return Boolean.compare(c2HasMentoring, c1HasMentoring);
    })
    .collect(Collectors.toList());

// 3. ìš°ì„ ìˆœìœ„ ë©˜í† ê°€ í˜„ì¬ í˜ì´ì§€ì— ì—†ëŠ” ê²½ìš° ìµœìƒë‹¨ì— ì‚½ì…
if (priorityMentoring.isPresent()) {
    Mentor priorityMentor = priorityMentoring.get().getMentor();
    
    boolean alreadyIncluded = candidates.stream()
        .anyMatch(c -> c.email().equals(priorityMentor.getEmail()));
        
    if (!alreadyIncluded) {
        // ë§ˆì§€ë§‰ í•­ëª© ì œê±° í›„ ìš°ì„ ìˆœìœ„ ë©˜í† ë¥¼ ìµœìƒë‹¨ì— ì‚½ì…
        if (!candidates.isEmpty()) {
            candidates.remove(candidates.size() - 1);
        }
        candidates.add(0, MentorCandidateDto.from(priorityMentor, 
            Optional.of(priorityMentoring.get()), 
            calculateRelativeFitByMentee(currUser.getId(), priorityMentor.getId())));
    }
}
```

</details>

### ğŸ›  ë°°í¬/ì„œë²„ ê´€ë ¨

<details>
<summary>nginx í”„ë¡ì‹œë¥¼ í†µí•œ í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ ì—°ê²° ë¬¸ì œ</summary>

**Problem**
- React í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°±ì—”ë“œ APIë¡œ GET ìš”ì²­ ì‹œ 403 ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©° ìš”ì²­ì´ ì œëŒ€ë¡œ ì „ë‹¬ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ

```javascript
// ê°œë°œì ë„êµ¬ ì½˜ì†” ì—ëŸ¬ ë¡œê·¸
process.env.REACT_APP_API_BASE_URL: http://localhost:8080

Login error:
   message: 'Network Error'
   name: 'AxiosError'
   code: 'ERR_NETWORK'
   config: {...}
   request: XMLHttpRequest
   
POST http://localhost:8080/api/auths/login
   net::ERR_CONNECTION_REFUSED
   
AxiosError: Network Error
   at g.onerror (http://13.125.96.234/static/js/main.2dd8dfaa.js:2:292464)
   at zr.request
```

**Reason**
Dockerë¡œ ë°±ì—”ë“œ ì„œë²„ë¥¼ 8080 í¬íŠ¸ë¡œ ì‹¤í–‰í–ˆëŠ”ë°, í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ ì„¤ì •ì—ì„œ ì˜¬ë°”ë¥¸ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„¤ì •í•˜ì§€ ì•ŠìŒ

**To Solve**
- í”„ë¡ íŠ¸ì—”ë“œ `.env` íŒŒì¼ì— `REACT_APP_API_URL=http://[ì„œë²„IP]:8080` ì„¤ì • ì¶”ê°€
- nginx í”„ë¡ì‹œ ì„¤ì •ê³¼ Docker í¬íŠ¸ ë§¤í•‘ í™•ì¸

</details>

<details>
<summary>EC2 í”„ë¦¬í‹°ì–´ ì„œë²„ ìš©ëŸ‰ ë¶€ì¡±ìœ¼ë¡œ ì¸í•œ ì„œë²„ ë‹¤ìš´</summary>

**Problem**
EC2 í”„ë¦¬í‹°ì–´(1GB) í™˜ê²½ì—ì„œ ì„œë²„ê°€ ê°‘ìê¸° ì ‘ê·¼ ë¶ˆê°€ ìƒíƒœê°€ ë˜ëŠ” ë¬¸ì œ ë°œìƒ.
ëª¨ë‹ˆí„°ë§ ìƒìœ¼ë¡œëŠ” CPU ì‚¬ìš©ë¥ ì´ 50% ì´í•˜ì„ì—ë„ ë¶ˆêµ¬í•˜ê³  ì„œë²„ ì‘ë‹µì´ ì—†ì—ˆìŒ.

**Reason**
Docker ì»¨í…Œì´ë„ˆì—ì„œ ë°œìƒí•˜ëŠ” ë¡œê·¸ê°€ ì§€ì†ì ìœ¼ë¡œ ëˆ„ì ë˜ì–´ ë””ìŠ¤í¬ ìš©ëŸ‰ì´ ê°€ë“ ì°¸.
EC2 í”„ë¦¬í‹°ì–´ì˜ ì œí•œëœ ìš©ëŸ‰(1GB)ì—ì„œ Docker ë¡œê·¸ê°€ ê³„ì† ìŒ“ì—¬ ì„œë²„ ë‹¤ìš´ ë°œìƒ.

**To Solve**

1. **Swap Space ì„¤ì •**ìœ¼ë¡œ ë©”ëª¨ë¦¬ ë¶€ì¡± ìƒí™© ëŒ€ì‘
```bash
# 2GB Swap íŒŒì¼ ìƒì„±
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# ì˜êµ¬ì ìœ¼ë¡œ ì„¤ì •
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

2. **Docker Composeì— ë¦¬ì†ŒìŠ¤ ì œí•œ ì„¤ì • ì¶”ê°€**

**Before: ê¸°ì¡´ ì„¤ì •**
```yaml
services:
  database:
    image: mysql:8.0
    command: --default-authentication-plugin=mysql_native_password
    ports:
      - "3306:3306"
    restart: unless-stopped

  backend:
    build:
      context: ./backend
    ports:
      - "8080:8080"
    restart: unless-stopped
```

**After: ìš©ëŸ‰ ê´€ë¦¬ ì„¤ì • ì¶”ê°€**
```yaml
services:
  database:
    image: mysql:8.0
    # ğŸ†• MySQL ë©”ëª¨ë¦¬ ìµœì í™” ì˜µì…˜ ì¶”ê°€
    command:
      - --default-authentication-plugin=mysql_native_password
      - --innodb_buffer_pool_size=128M      # RAM ì ˆì•½
      - --max_connections=100               # ì—°ê²° ìˆ˜ ì œí•œ
    # ğŸ†• ì»¨í…Œì´ë„ˆ ë©”ëª¨ë¦¬ ì œí•œ
    mem_limit: 256m
    ports:
      - "3306:3306"
    restart: unless-stopped

  backend:
    build:
      context: ./backend
    # ğŸ†• ë©”ëª¨ë¦¬ ë° ë¡œê·¸ ì œí•œ ì„¤ì •
    mem_limit: 512m
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"
    ports:
      - "8080:8080"
    restart: unless-stopped
```

3. **ê¸°ì¡´ ëˆ„ì ëœ Docker ë¡œê·¸ ì •ë¦¬**
```bash
# ëª¨ë“  Docker ë¡œê·¸ ë° ìºì‹œ ì •ë¦¬
docker system prune -a --volumes -f
```

</details>
